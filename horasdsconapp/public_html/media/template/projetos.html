{% extends "base.html" %}

{% block head %}

    <style>
        .ui-button { margin-left: -1px; }
        .ui-button-icon-only .ui-button-text { padding: 0.35em; }
        .ui-autocomplete-input { margin: 0; padding: 0.48em 0 0.47em 0.45em; }
    </style>
    <script type="text/javascript" charset="utf-8">

        function callback_example1(data){
            alert(data.message);
        }

        function callback_example2(data){
            for (var i=0; i < data.numbers.length; i++) {
                alert(data.numbers[i]);
            }
        }

        function callback_example3(data){
            alert(data.result);
        }

        function callback_example_error(data){
            alert(data);
        }

        function callback_complex_example1(data){
            alert(data.message);
        }

        function custom_error(){
            alert('Custom error');
        }

    </script>
    <script type="text/javascript" charset="utf-8">

        function atualizarcomboprojetos(projetos){
            //var options;
            //$.each(projetos, function(i, item ) {
            //    options += "<option value='" + item + "'>" + item + "</option>";
            //});
            //$("#combo_projetos").find('option').remove().end().append(options);
            projetosDataSource = new kendo.data.DataSource({data:projetos});
            combo_projetos.dataSource = projetosDataSource;
        }

        function my_callback(data){
            alert('Error ');
        }
    </script>
    <script>
        $(document).ready(function() {
            // create ComboBox from select HTML element
            var combo_empresas = $("#combo_empresas").kendoComboBox({
                filter: "contains",
                suggest: true,
                index: 3,
                change: function() {
                    var value = this.value();
                    if (value) {
                        Dajaxice.horasdsconapp.updatecomboprojetos(atualizarcomboprojetos, {'option':value});
                    } else {
                        //combo_projetos.enable(false);
                    }
                    //combo_projetos.enable();
                    combo_projetos.value("");
                }
            });
            var combo_projetos = $("#combo_projetos").kendoComboBox({
                autoBind: false,
                dataTextField: "text",
                dataValueField: "value",
                dataSource: [
                    { text: "Item1", value: "1" },
                    { text: "Item2", value: "2" }
                ],
                filter: "contains",
                suggest: true,
                index: 3
            }).data("kendoComboBox");
        });
    </script>

{% endblock %}

{% block heading %}{% endblock %}

{% block content %}
    <div style="margin-left: auto; margin-right: 0">
        <form action="/criarplanilha/" method="post">
            {% csrf_token %}
            <div class="header">
                <h1>Dscon - Aplicativo de Lançamento de Horas</h1>
                <p class="description">
                    Escolha aqui os projetos nos quais você trabalha atualmente, pois facilitará o lançamento de horas para você.
                </p>

                    <div id="empresas">
                        <label>Escolha a empresa: </label>
                        <select id="combo_empresas" placeholder="Selecione uam empresa...">
                            {% for empresa in empresas %}
                                <option value="{{ empresa }}">{{ empresa }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div id="projetos">
                        <label>Escolha um projeto: </label>
                        <select id="combo_projetos" placeholder="Selecione um projeto...">
                            {% for projeto in projetos %}
                                <option value="{{ projeto.projectid }}">{{ projeto.projectid}} - {{ projeto.projectname }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </br>
            </div>
        </form>
    </div>
{% endblock %}