/*
* Kendo UI Beta v2012.1.229 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

(function(a,b){function I(b,c){return b===c||a.contains(b,c)}var c=window.kendo,d=c.ui,e=c.support.touch,f=c.getOffset,g=a.browser.msie&&a.browser.version<9,h="open",i="close",j="center",k="left",l="right",m="top",n="bottom",o="absolute",p="hidden",q="body",r="location",s="position",t="visible",u="fitted",v="effects",w="k-state-active",x="k-state-border",y=".k-picker-wrap, .k-dropdown-wrap, .k-link",z=e?"touchstart":"mousedown",A="kendoMobileScroller",B=a(document),C=c.support.transitions.css,D=C+"transform",E=a.extend,F=a.proxy,G=d.Widget,H=["font-family","font-size","font-stretch","font-style","font-weight","line-height"],J=G.extend({init:function(b,d){var f=this;G.fn.init.call(f,b,d),b=f.element,d=f.options,f.collisions=f.options.collision.split(" "),f.collisions.length===1&&f.collisions.push(f.collisions[0]),f.element.hide().addClass("k-popup k-group k-reset").css({position:o}).appendTo(a(d.appendTo)).bind("mouseenter mouseleave",function(a){f._hovered=a.type==="mouseenter"}),f.wrapper=a(),d.animation===!1&&(d.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}}),v in d.animation.close||(d.animation.close=E(!0,{reverse:!0},d.animation.open,d.animation.close)),E(d.animation.open,{complete:function(){f.wrapper.css({overflow:t})}}),E(d.animation.close,{complete:function(){f.wrapper.hide();var e=f.wrapper.data(r),g=a(d.anchor),h,i;e&&f.wrapper.css(e),d.anchor!=q&&(h=g.hasClass(x+"-down")?"down":"up",i=x+"-"+h,g.removeClass(i).children(y).removeClass(w).removeClass(i),b.removeClass(x+"-"+c.directions[h].reverse)),f._closing=!1}}),a(document.documentElement).bind(z,F(f._mousedown,f)),e?A in b&&b[A]():(f._currentWidth=B.width(),a(window).bind("resize scroll",function(){if(g){var a=B.width();if(a==f._currentWidth)return;f._currentWidth=a}f._hovered||f.close()})),d.toggleTarget&&a(d.toggleTarget).bind(d.toggleEvent,F(f.toggle,f))},events:[h,i],options:{name:"Popup",toggleEvent:"click",origin:n+" "+k,position:m+" "+k,anchor:q,appendTo:q,collision:"flip fit",animation:{open:{effects:"slideIn:down",transition:!0,duration:200,show:!0},close:{duration:100,show:!1,hide:!0}}},open:function(){var b=this,d=b.element,e=b.options,f="down",g,i,j=a(e.anchor),k,l=0;if(!b.visible()){for(;l<6;l++)k=H[l],d.css(k,j.css(k));if(d.data("animating")||b.trigger(h))return;b.wrapper=i=c.wrap(d).css({overflow:p,display:"block",position:o}),c.support.mobileOS.android&&i.add(j).css(D,"translatez(0)"),i.css(s),e.appendTo==q&&i.css(m,"-10000px"),g=E(!0,{},e.animation.open),g.effects=c.parseEffects(g.effects,b._update()),f=g.effects.slideIn?g.effects.slideIn.direction:f;if(e.anchor!=q){var n=x+"-"+f;d.addClass(x+"-"+c.directions[f].reverse),j.addClass(n).children(y).addClass(w).addClass(n)}d.data(v,g.effects).kendoStop(!0).kendoAnimate(g)}},toggle:function(){var a=this;a[a.visible()?i:h]()},visible:function(){return this.element.is(":"+t)},close:function(){var a=this,b=a.options,d,e;if(a.visible()){if(a._closing||a.trigger(i))return;d=E(!0,{},b.animation.close),e=a.element.data(v),a.wrapper=c.wrap(a.element).css({overflow:p}),e&&(d.effects=e),a._closing=!0,a.element.kendoStop(!0).kendoAnimate(d)}},_mousedown:function(b){var d=this,e=d.element[0],f=d.options,g=a(f.anchor)[0],h=f.toggleTarget,i=c.eventTarget(b),j=a(i).closest(".k-popup")[0];(!j||j===d.element[0])&&!I(e,i)&&!I(g,i)&&(!h||!I(a(h)[0],i))&&d.close()},_update:function(){return this._position(a(window))},_fit:function(a,b,c){var d=0;a+b>c&&(d=c-(a+b)),a<0&&(d=a);return d},_flip:function(a,b,c,d,e,f,g){var h=0;g=g||b,f!==e&&f!==j&&e!==j&&(a+g>d&&(h+=-(c+b)),a+h<0&&(h+=c+b));return h},_position:function(b){var d=this,e=d.element,g=d.wrapper,h=d.options,i=a(h.anchor),j=h.origin.toLowerCase().split(" "),k=h.position.toLowerCase().split(" "),l=d.collisions,m=!1,n=c.support.zoomLevel(),o=10002,p=i.parents().filter(g.siblings());if(p[0]){var q=Number(a(p).css("zIndex"));q&&(o=q+1)}g.css("zIndex",o),h.appendTo===J.fn.options.appendTo?g.css(d._align(j,k)):g.css(d._align(j,k,!0));var t=f(g,s),v=f(g),w=i.offsetParent().parent(".k-animation-container");w.length&&w.data(u)&&(t=f(g,s),v=f(g)),v={top:v.top-(window.pageYOffset||document.documentElement.scrollTop||0),left:v.left-(window.pageXOffset||document.documentElement.scrollLeft||0)},d.wrapper.data(r)||g.data(r,E({},t));var x=E({},v),y=E({},t);l[0]==="fit"&&(y.top+=d._fit(x.top,g.outerHeight(),b.height()/n)),l[1]==="fit"&&(y.left+=d._fit(x.left,g.outerWidth(),b.width()/n)),y.left!=t.left||y.top!=t.top?g.data(u,!0):g.removeData(u);var z=E({},y);l[0]==="flip"&&(y.top+=d._flip(x.top,e.outerHeight(),i.outerHeight(),b.height()/n,j[0],k[0],g.outerHeight())),l[1]==="flip"&&(y.left+=d._flip(x.left,e.outerWidth(),i.outerWidth(),b.width()/n,j[1],k[1],g.outerWidth())),g.css(y);return y.left!=z.left||y.top!=z.top},_align:function(b,c,d){var e=this,g=e.wrapper,h=a(e.options.anchor),i=b[0],o=b[1],p=c[0],q=c[1],r=d?{top:0,left:0}:f(h),s=g.outerWidth(),t=g.outerHeight(),u=h.outerWidth(),v=h.outerHeight(),w=r.top,x=r.left,y=Math.round,z=i!==p,A=o!==q;i===m&&d&&z&&(w-=t),i===n&&!d&&(w+=v),i===j&&(w+=y(v/2)),p===m&&d&&z&&(w+=v),p===n&&!d&&(w-=t),p===j&&(w-=y(t/2)),o===k&&d&&A&&(x-=s),o===l&&!d&&(x+=u),o===j&&(x+=y(u/2)),q===k&&d&&A&&(x+=u),q===l&&!d&&(x-=s),q===j&&(x-=y(s/2));return{top:w,left:x}}});d.plugin(J)})(jQuery)